<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
	<link rel="stylesheet" href="../css/app.css" />
	<title></title>
</head>
<body>
<h1>任选基本走势图</h1>
<div id="detailed-panel">
<table border="1">
<thead>
<tr>
	<th rowspan="2">期号</th>
	<th rowspan="2" colspan="5">开奖号码</th>
	<th colspan="11">开奖号码分布</th>
	<th rowspan="2">和值</th>
	<th rowspan="2">跨度</th>
	<th rowspan="2">奇偶比</th>
	<th rowspan="2">质合比</th>
	<th colspan="6">奇数个数（偶数）</th>
	<th colspan="6">质数个数（合数）</th>
</tr>
<tr>
	<th>01</th>
	<th>02</th>
	<th>03</th>
	<th>04</th>
	<th>05</th>
	<th>06</th>
	<th>07</th>
	<th>08</th>
	<th>09</th>
	<th>10</th>
	<th>11</th>
	<th>0</th>
	<th>1</th>
	<th>2</th>
	<th>3</th>
	<th>4</th>
	<th>5</th>
	<th>0</th>
	<th>1</th>
	<th>2</th>
	<th>3</th>
	<th>4</th>
	<th>5</th>
</tr>
</thead>
<tbody></tbody>
</table>


</div>

<div id="statistics-panel">

<table border="1">
<thead>
<tr>
	<th rowspan="2">统计类型</th>
	<th colspan="11">开奖号码分布</th>
	<th rowspan="2">和值</th>
	<th rowspan="2">跨度</th>
	<th rowspan="2">奇偶比</th>
	<th rowspan="2">质合比</th>
	<th colspan="6">奇数个数（偶数）</th>
	<th colspan="6">质数个数（合数）</th>
</tr>
<tr>
	<th>01</th>
	<th>02</th>
	<th>03</th>
	<th>04</th>
	<th>05</th>
	<th>06</th>
	<th>07</th>
	<th>08</th>
	<th>09</th>
	<th>10</th>
	<th>11</th>
	<th>0</th>
	<th>1</th>
	<th>2</th>
	<th>3</th>
	<th>4</th>
	<th>5</th>
	<th>0</th>
	<th>1</th>
	<th>2</th>
	<th>3</th>
	<th>4</th>
	<th>5</th>
</tr>
</thead>
<tbody></tbody>
</table>

</div>

	<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
	<script src="../lib/app.js"></script>
	
	<script type="text/javascript">
		
		$(function()
		{
			app.showLoading();
			$.getJSON("../service/11x5.jsp?mode=1", function(response)
			{
				if(response.status == 1)
				{
					var rows = response.resource.data;
					var $detailed = $("#detailed-panel table tbody");
					var content = '';
					$.each(rows, function(i, row)
					{
						var codes = row["ZJHM"].split(",")
						content += '<tr>';
						content += '<td>'+row["QH"]+'</td>';
						content += '<td>'+codes[0]+'</td>';
						content += '<td>'+codes[1]+'</td>';
						content += '<td>'+codes[2]+'</td>';
						content += '<td>'+codes[3]+'</td>';
						content += '<td>'+codes[4]+'</td>';


						content += '<td class="K01">'+(codes.indexOf('01') == -1 ? '' : '<span>01</span>')+'</td>';
						content += '<td class="K02">'+(codes.indexOf('02') == -1 ? '' : '<span>02</span>')+'</td>';
						content += '<td class="K03">'+(codes.indexOf('03') == -1 ? '' : '<span>03</span>')+'</td>';
						content += '<td class="K04">'+(codes.indexOf('04') == -1 ? '' : '<span>04</span>')+'</td>';
						content += '<td class="K05">'+(codes.indexOf('05') == -1 ? '' : '<span>05</span>')+'</td>';
						content += '<td class="K06">'+(codes.indexOf('06') == -1 ? '' : '<span>06</span>')+'</td>';
						content += '<td class="K07">'+(codes.indexOf('07') == -1 ? '' : '<span>07</span>')+'</td>';
						content += '<td class="K08">'+(codes.indexOf('08') == -1 ? '' : '<span>08</span>')+'</td>';
						content += '<td class="K09">'+(codes.indexOf('09') == -1 ? '' : '<span>09</span>')+'</td>';
						content += '<td class="K10">'+(codes.indexOf('10') == -1 ? '' : '<span>10</span>')+'</td>';
						content += '<td class="K11">'+(codes.indexOf('11') == -1 ? '' : '<span>11</span>')+'</td>';


						var total = 0
						var max = null;
						var min = null;
						var oddcount = 0;
						var primecount = 0;
						$.each(codes, function(i, code)
						{
							code = parseInt(code)
							total += code;

							max = Math.max(code, (max || code));
							min = Math.min(code, (min || code));
							if(app.isOdd(code))
							{
								oddcount += 1;
							}
							if(app.isPrime(code))
							{
								primecount += 1;
							}

						});

						content += '<td>'+total+'</td>';
						content += '<td>'+(max - min)+'</td>';
						content += '<td>'+oddcount+':'+(5 - oddcount)+'</td>';
						content += '<td>'+primecount+':'+(5 - primecount)+'</td>';
						content += '<td class="J0">'+(oddcount == 0 ?   '<span>0</span>' : '')+'</td>';
						content += '<td class="J1">'+(oddcount == 1 ?   '<span>1</span>' : '')+'</td>';
						content += '<td class="J2">'+(oddcount == 2 ?   '<span>2</span>' : '')+'</td>';
						content += '<td class="J3">'+(oddcount == 3 ?   '<span>3</span>' : '')+'</td>';
						content += '<td class="J4">'+(oddcount == 4 ?   '<span>4</span>' : '')+'</td>';
						content += '<td class="J5">'+(oddcount == 5 ?   '<span>5</span>' : '')+'</td>';
						content += '<td class="Z0">'+(primecount == 0 ? '<span>0</span>' : '')+'</td>';
						content += '<td class="Z1">'+(primecount == 1 ? '<span>1</span>' : '')+'</td>';
						content += '<td class="Z2">'+(primecount == 2 ? '<span>2</span>' : '')+'</td>';
						content += '<td class="Z3">'+(primecount == 3 ? '<span>3</span>' : '')+'</td>';
						content += '<td class="Z4">'+(primecount == 4 ? '<span>4</span>' : '')+'</td>';
						content += '<td class="Z5">'+(primecount == 5 ? '<span>5</span>' : '')+'</td>';
						content += '</tr>';
					});
					$detailed.html(content);

					

					var $statistics = $("#statistics-panel table tbody");

					var tempstatisticsmap = {};
					var statisticsmap = {};
					var $rows = $detailed.find("tr");
					$.each($rows, function(i, row)
					{
						var $cells = $(row).find("td");
						$.each($cells, function(j, cell)
						{
							var $cell = $(cell);
							var classname = "L"+$cell.attr("class");
							var isBingo = ($cell.find("span").length != 0);

							if(tempstatisticsmap[classname] == null)
							{
								tempstatisticsmap[classname] = 0;
							}

							if(isBingo)
							{
								tempstatisticsmap[classname] += 1;
							}

							if(!isBingo || (i == $rows.length - 1))
							{
								statisticsmap[classname] = Math.max((statisticsmap[classname] || 0), (tempstatisticsmap[classname] || 0));
								tempstatisticsmap[classname] = 0;
							}

							classname = "Y"+$cell.attr("class");
							if(tempstatisticsmap[classname] == null)
							{
								tempstatisticsmap[classname] = 0;
							}

							if(!isBingo)
							{
								tempstatisticsmap[classname] += 1;
							}
							
							if(isBingo || (i == $rows.length - 1))
							{
								statisticsmap[classname] = Math.max((statisticsmap[classname] || 0), (tempstatisticsmap[classname] || 0));
								tempstatisticsmap[classname] = 0;
							}
						});
						
					});

					content = "";

					content += '<tr>';
					content += '<td>出现总次数</td>';
					content += '<td>'+($(".K01 span").length)+'</td>';
					content += '<td>'+($(".K02 span").length)+'</td>';
					content += '<td>'+($(".K03 span").length)+'</td>';
					content += '<td>'+($(".K04 span").length)+'</td>';
					content += '<td>'+($(".K05 span").length)+'</td>';
					content += '<td>'+($(".K06 span").length)+'</td>';
					content += '<td>'+($(".K07 span").length)+'</td>';
					content += '<td>'+($(".K08 span").length)+'</td>';
					content += '<td>'+($(".K09 span").length)+'</td>';
					content += '<td>'+($(".K10 span").length)+'</td>';
					content += '<td>'+($(".K11 span").length)+'</td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td>'+($(".J0 span").length)+'</td>';
					content += '<td>'+($(".J1 span").length)+'</td>';
					content += '<td>'+($(".J2 span").length)+'</td>';
					content += '<td>'+($(".J3 span").length)+'</td>';
					content += '<td>'+($(".J4 span").length)+'</td>';
					content += '<td>'+($(".J5 span").length)+'</td>';
					content += '<td>'+($(".Z0 span").length)+'</td>';
					content += '<td>'+($(".Z1 span").length)+'</td>';
					content += '<td>'+($(".Z2 span").length)+'</td>';
					content += '<td>'+($(".Z3 span").length)+'</td>';
					content += '<td>'+($(".Z4 span").length)+'</td>';
					content += '<td>'+($(".Z5 span").length)+'</td>';
					content += '</tr>';

					content += '<tr>';
					content += '<td>最大遗漏值</td>';
					content += '<td>'+statisticsmap["YK01"]+'</td>';
					content += '<td>'+statisticsmap["YK02"]+'</td>';
					content += '<td>'+statisticsmap["YK03"]+'</td>';
					content += '<td>'+statisticsmap["YK04"]+'</td>';
					content += '<td>'+statisticsmap["YK05"]+'</td>';
					content += '<td>'+statisticsmap["YK06"]+'</td>';
					content += '<td>'+statisticsmap["YK07"]+'</td>';
					content += '<td>'+statisticsmap["YK08"]+'</td>';
					content += '<td>'+statisticsmap["YK09"]+'</td>';
					content += '<td>'+statisticsmap["YK10"]+'</td>';
					content += '<td>'+statisticsmap["YK11"]+'</td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td>'+statisticsmap["YJ0"]+'</td>';
					content += '<td>'+statisticsmap["YJ1"]+'</td>';
					content += '<td>'+statisticsmap["YJ2"]+'</td>';
					content += '<td>'+statisticsmap["YJ3"]+'</td>';
					content += '<td>'+statisticsmap["YJ4"]+'</td>';
					content += '<td>'+statisticsmap["YJ5"]+'</td>';
					content += '<td>'+statisticsmap["YZ0"]+'</td>';
					content += '<td>'+statisticsmap["YZ1"]+'</td>';
					content += '<td>'+statisticsmap["YZ2"]+'</td>';
					content += '<td>'+statisticsmap["YZ3"]+'</td>';
					content += '<td>'+statisticsmap["YZ4"]+'</td>';
					content += '<td>'+statisticsmap["YZ5"]+'</td>';
					content += '</tr>';

					content += '<tr>';
					content += '<td>最大连出值</td>';
					content += '<td>'+statisticsmap["LK01"]+'</td>';
					content += '<td>'+statisticsmap["LK02"]+'</td>';
					content += '<td>'+statisticsmap["LK03"]+'</td>';
					content += '<td>'+statisticsmap["LK04"]+'</td>';
					content += '<td>'+statisticsmap["LK05"]+'</td>';
					content += '<td>'+statisticsmap["LK06"]+'</td>';
					content += '<td>'+statisticsmap["LK07"]+'</td>';
					content += '<td>'+statisticsmap["LK08"]+'</td>';
					content += '<td>'+statisticsmap["LK09"]+'</td>';
					content += '<td>'+statisticsmap["LK10"]+'</td>';
					content += '<td>'+statisticsmap["LK11"]+'</td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td></td>';
					content += '<td>'+statisticsmap["LJ0"]+'</td>';
					content += '<td>'+statisticsmap["LJ1"]+'</td>';
					content += '<td>'+statisticsmap["LJ2"]+'</td>';
					content += '<td>'+statisticsmap["LJ3"]+'</td>';
					content += '<td>'+statisticsmap["LJ4"]+'</td>';
					content += '<td>'+statisticsmap["LJ5"]+'</td>';
					content += '<td>'+statisticsmap["LZ0"]+'</td>';
					content += '<td>'+statisticsmap["LZ1"]+'</td>';
					content += '<td>'+statisticsmap["LZ2"]+'</td>';
					content += '<td>'+statisticsmap["LZ3"]+'</td>';
					content += '<td>'+statisticsmap["LZ4"]+'</td>';
					content += '<td>'+statisticsmap["LZ5"]+'</td>';
					content += '</tr>';



					$statistics.html(content);
					app.hideLoading();


				}
				else
				{
					app.hideLoading();
					app.message(response.messages);
				}
			});
		});

	</script>

</body>
</html>
